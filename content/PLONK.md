---
title: PLONK
date: 2023-11-16
tags: []
categories: []
toc: true
mathjax: true
comments: true
description: 
---

PLONK的目的是让一个证明者（prover）向一个验证者（verifier）证明他知道一个值 $X$，这个值可以使一个给定的程序 $P$ 的输出等于另一个值 $Y$。例如，证明者可能想要证明他知道一个密码，这个密码可以解开一个锁，而不用把密码告诉验证者。

为了做到这一点，PLONK把这个问题转化为一个数学问题，即证明一组多项式方程的解。多项式是一种由变量和系数组成的代数表达式，例如 $x^2 + 3x - 5$。多项式方程是一种让多项式等于零的方程，例如 $x^2 + 3x - 5 = 0$。如果我们能找到一个数 $x$ 使得方程成立，那么我们就说这个数是方程的解。例如，$x = 1$ 和 $x = -5$ 都是上面方程的解。

PLONK的核心思想是，如果我们能把程序 $P$ 转化为一组多项式方程，那么我们就可以用多项式的性质来证明我们知道一个解 $X$。具体来说，PLONK使用了一种叫做多项式承诺（polynomial commitment）的技术，它可以让证明者把一个多项式的信息压缩成一个很小的值，叫做承诺（commitment），并且可以用这个承诺来证明他知道多项式在某个点的值，叫做开放（opening）。

PLONK的流程大致如下：

1. 证明者和验证者事先协商好一个有限域 $F$ 和一个子集 $H$。有限域是一种只有有限个元素的代数结构，例如 $F = \\{0, 1, 2, 3, 4, 5, 6\\}$。子集是有限域的一部分，例如 $H = \\{1, 2, 3\\}$。
2. 证明者和验证者共同参与一个可信安装（trusted setup）的过程，生成一个多项式 $Z_H(x)$，它的根是 $H$ 中的所有元素，也就是说 $Z_H(x) = 0$ 当且仅当 $x \in H$。这个多项式叫做消失多项式（vanishing polynomial），因为它在 $H$ 上消失了。可信安装的目的是让证明者和验证者都不知道 $Z_H(x)$ 的系数，否则他们就可以伪造证明。
3. 证明者把程序 $P$ 转化为一组多项式方程，例如 $f_1(x) = 0$，$f_2(x) = 0$，$f_3(x) = 0$ 等等。这些方程的解就是 $X$。证明者还要把 $Y$ 也转化为一个多项式 $y(x)$。
4. 证明者把这些多项式方程合并成一个多项式 $f(x)$，它的形式是 $f(x) = t(x) \cdot Z_H(x) + y(x)$，其中 $t(x)$ 是一个商多项式（quotient polynomial）。这样做的好处是，如果 $f(x)$ 在 $H$ 上为零，那么就意味着所有的 $f_i(x)$ 在 $H$ 上为零，也就是说 $X$ 是所有方程的解。
5. 证明者对 $f(x)$ 和 $t(x)$ 做多项式承诺，得到两个承诺 $C_f$ 和 $C_t$，并把它们发送给验证者。
6. 验证者随机选择一个点 $z \in F$，并把它发送给证明者。
7. 证明者计算 $f(z)$ 和 $t(z)$，并用承诺 $C_f$ 和 $C_t$ 来证明它们是正确的。证明者还要计算 $Z_H(z)$ 和 $y(z)$，并把这些值发送给验证者。
8. 验证者检查 $f(z) = t(z) \cdot Z_H(z) + y(z)$ 是否成立，以及证明者的开放是否有效。如果都成立，那么验证者就接受证明，否则就拒绝证明。

这就是PLONK的基本流程，当然还有很多细节和优化，例如如何处理排列（permutation）和线性组合（linear combination），如何选择有限域和子集，如何实现多项式承诺和开放等等。

---

[Understanding PLONK --- 了解 PLONK](https://vitalik.ca/general/2019/09/22/plonk.html)
