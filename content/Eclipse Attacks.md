---
title: Eclipse Attacks
date: 2023-11-16
tags: []
categories: []
toc: true
mathjax: true
comments: true
description: 
---
Eclipse attack是一种基于P2P（点对点）网络的[[区块链攻击|攻击]]，目的是将目标节点与网络中的其他节点隔离，从而控制目标节点的信息获取和传输。Eclipse attack只能针对接受其他节点的入站连接的节点进行，而不是所有节点都接受入站连接。在比特币网络中，每个节点默认最多有117个入站TCP连接和8个出站TCP连接。

Eclipse attack的工作原理是，攻击者利用自己控制的节点或者僵尸网络，向目标节点发送大量的IP地址，使目标节点在重启或重新连接时优先选择这些IP地址。然后，攻击者就可以拦截目标节点的所有入站和出站连接，向目标节点提供虚假或过时的区块链数据，或者阻止目标节点与真实网络中的其他节点通信。

Eclipse attack的后果可能有以下几种：

- 双花攻击：攻击者可以利用Eclipse attack向目标节点展示一个错误的区块链状态，从而在同一笔资金上进行两次或多次支付。例如，攻击者可以向一个商户支付一笔未经确认的交易，然后在真实网络中用同样的资金支付给另一个人。如果攻击者的交易手续费更高，那么矿工会优先打包攻击者的交易，导致商户的交易无效。或者，攻击者可以向一个商户支付一笔经过多次确认的交易，但是这些确认是在被隔离的网络中进行的，而不是真实网络中。当商户的节点重新加入真实网络后，他们会发现自己的交易被孤立了，因为真实网络中有一个更长的有效链。
- 矿工算力损失：攻击者可以利用Eclipse attack削弱目标节点的挖矿能力，从而获得相对优势。例如，攻击者可以向目标节点展示一个落后的区块链状态，使目标节点在无效的区块上浪费算力。或者，攻击者可以向目标节点隐藏最新的区块，使目标节点无法及时更新自己的区块链状态，从而降低目标节点获得下一个区块的概率。
Eclipse attack的防范措施有以下几种：

- 选择可信的节点连接：节点可以选择只连接到一些已知的可信节点，例如白名单中的IP地址，从而避免被恶意节点欺骗。但是，这种方法可能会降低网络的去中心化程度，因为新节点可能无法加入网络。
- 随机选择新连接：节点可以在每次重启或重新连接时，随机选择一些新的出站连接，从而减少被恶意节点占据的可能性。这种方法可以提高Eclipse attack的成本，因为攻击者需要不断地刷新自己的IP地址，以保持对目标节点的控制。
- 增加地址的存储空间：节点可以增加自己存储的IP地址的数量，从而增加自己连接到真实网络的机会。这种方法也可以提高Eclipse attack的成本，因为攻击者需要提供更多的IP地址，以覆盖目标节点的存储空间。
总之，Eclipse attack是一种基于P2P网络的攻击，可以用于实施双花攻击或者
